<Window x:Class="EShellULoadSetTools.Views.UniformLoadSetsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:EShellULoadSetTools.ViewModels"
        mc:Ignorable="d"
        Title="Shell Uniform Load Sets"
        Height="480"
        Width="640"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <!-- Right-aligned numeric cell style -->
        <Style x:Key="RightAlignedCellStyle" TargetType="TextBlock">
            <Setter Property="HorizontalAlignment" Value="Right" />
        </Style>

        <!-- Right-aligned header style -->
        <Style x:Key="RightAlignedHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="HorizontalContentAlignment" Value="Right" />
        </Style>
    </Window.Resources>

    <Grid Margin="8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Text="Shell Uniform Load Sets"
                   FontWeight="Bold"
                   FontSize="14"
                   Margin="0,0,0,8" />

        <!-- Current model info -->
        <TextBlock Grid.Row="1"
                   Text="{Binding CurrentModelInfoText}"
                   Margin="0,0,0,8"
                   TextWrapping="Wrap" />

        <!-- Main content area: TreeView on the left, DataGrid on the right -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="3*" />
            </Grid.ColumnDefinitions>

            <!-- TreeView bound to RootNodes -->
            <TreeView Grid.Column="0"
                      ItemsSource="{Binding RootNodes}"
                      SelectedItemChanged="TreeView_SelectedItemChanged"
                      Margin="0,0,8,0">
                <TreeView.ItemTemplate>
                    <HierarchicalDataTemplate DataType="{x:Type vm:UniformLoadSetNodeViewModel}"
                                              ItemsSource="{Binding Children}">
                        <TextBlock Text="{Binding Name}" />
                    </HierarchicalDataTemplate>
                </TreeView.ItemTemplate>
            </TreeView>

            <!-- DataGrid showing patterns and values for the selected set -->
            <DataGrid Grid.Column="1"
                      ItemsSource="{Binding SelectedNode.Records}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      HeadersVisibility="Column"
                      Margin="8,0,0,0">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Load Pattern"
                                        Binding="{Binding LoadSetLoadPattern}"
                                        Width="*" />
                    <DataGridTextColumn Header="Value"
                                        Binding="{Binding LoadPatternValue}"
                                        Width="*"
                                        ElementStyle="{StaticResource RightAlignedCellStyle}"
                                        HeaderStyle="{StaticResource RightAlignedHeaderStyle}" />
                    <DataGridTextColumn Header="Unit"
                                        Binding="{Binding Unit}"
                                        Width="*" />
                </DataGrid.Columns>
            </DataGrid>
        </Grid>

        <!-- Bottom close button -->
        <Button Grid.Row="3"
                Content="Close"
                HorizontalAlignment="Right"
                Width="80"
                Margin="0,8,0,0"
                IsCancel="True"
                Click="CloseButton_Click" />
    </Grid>
</Window>
